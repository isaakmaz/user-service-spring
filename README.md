# üöÄ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ "User & Notification" —Å Apache Kafka

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç **–≥–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å (`user-service`)** –∏ –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–æ–ª–Ω–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∑–∞–¥–∞—á–∞

–°–∏—Å—Ç–µ–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

1.  **`user-service` (—ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π):**
    *   –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
    *   API –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é **Swagger (OpenAPI)** –∏ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **HATEOAS**, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏.
    *   –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ** –≤ Apache Kafka.
    *   [–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `user-service` –Ω–∞ GitHub](https://github.com/isaakmaz/user-service-spring)

2.  **`notification-service` (–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Å–µ—Ä–≤–∏—Å):**
    *   **–°–ª—É—à–∞–µ—Ç** —Å–æ–±—ã—Ç–∏—è –∏–∑ Kafka.
    *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
    *   [–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `notification-service` –Ω–∞ GitHub](https://github.com/isaakmaz/notification-service)

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—é —Å–∏—Å—Ç–µ–º—É

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (2 —Å–µ—Ä–≤–∏—Å–∞, Kafka, Zookeeper, PostgreSQL) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Docker Compose**. –§–∞–π–ª `docker-compose.yml` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **Docker Desktop**.

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/isaakmaz/user-service-spring.git
    cd user-service-spring
    ```

2.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker Compose:**
    –ù–∞—Ö–æ–¥—è—Å—å –≤ –ø–∞–ø–∫–µ `user-service-spring`, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
    ```bash
    docker-compose up --build -d
    ```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç?**
*   Docker Compose –∑–∞–ø—É—Å—Ç–∏—Ç Kafka, Zookeeper –∏ PostgreSQL –∏–∑ –≥–æ—Ç–æ–≤—ã—Ö –æ–±—Ä–∞–∑–æ–≤.
*   –û–Ω —Å–æ–±–µ—Ä–µ—Ç Docker-–æ–±—Ä–∞–∑ –¥–ª—è `user-service` –∏–∑ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —ç—Ç–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
*   –û–Ω **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `notification-service` —Å GitHub** –∏ —Å–æ–±–µ—Ä–µ—Ç –µ–≥–æ Docker-–æ–±—Ä–∞–∑.
*   –í –∏—Ç–æ–≥–µ –±—É–¥—É—Ç –∑–∞–ø—É—â–µ–Ω—ã –≤—Å–µ 5 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∏ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ.

---

## üìñ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger UI)

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º—ã –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑—É—á–∏—Ç—å –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ `user-service` —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Swagger.

1.  **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
    *   [**http://localhost:8080/swagger-ui.html**](http://localhost:8080/swagger-ui.html)

–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –º–æ–¥–µ–ª–µ–π –æ—Ç–≤–µ—Ç–æ–≤. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –ø—Ä—è–º–æ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Postman –∏–ª–∏ `curl`. Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω—ã —Å–µ—Ä–≤–∏—Å–æ–º **Mailtrap**.

1.  **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏ Kafka –∏ HATEOAS):**
    *   **–ú–µ—Ç–æ–¥:** `POST`
    *   **URL:** `http://localhost:8080/api/users`
    *   **–¢–µ–ª–æ:** `{"name": "–ò–≤–∞–Ω", "email": "test@mailtrap.io", "age": 30}`
    *   **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–∞ Mailtrap –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ, –∞ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ —Å—Å—ã–ª–∫–∞–º–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.
    *   **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
        ```json
        {
            "id": 1,
            "name": "–ò–≤–∞–Ω",
            "email": "test@mailtrap.io",
            "age": 30,
            "_links": {
                "self": {
                    "href": "http://localhost:8080/api/users/1"
                },
                "delete_user": {
                    "href": "http://localhost:8080/api/users/1"
                }
            }
        }
        ```

2.  **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID (–ø—Ä–æ–≤–µ—Ä–∫–∞ HATEOAS):**
    *   **–ú–µ—Ç–æ–¥:** `GET`
    *   **URL:** `http://localhost:8080/api/users/1` (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ID, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –Ω–∞ —à–∞–≥–µ 1)
    *   **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–º–µ—Å—Ç–µ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏.

3.  **–†—É—á–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ email (–ø—Ä–æ–≤–µ—Ä–∫–∞ API `notification-service`):**
    *   **–ú–µ—Ç–æ–¥:** `POST`
    *   **URL:** `http://localhost:8081/api/notifications/send-email`
    *   **–¢–µ–ª–æ:** `{"to": "manual@test.ru", "subject": "–ü—Ä–æ–≤–µ—Ä–∫–∞", "body": "–ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å"}`
    *   **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–∞ Mailtrap –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–∏—Å—å–º–æ —Å —Ç–µ–º–æ–π "–ü—Ä–æ–≤–µ—Ä–∫–∞".

---

## ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

–û–±–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–∑ IDE –∏–ª–∏ –∫–æ–º–∞–Ω–¥–æ–π `mvn clean test` –≤ –ø–∞–ø–∫–µ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.