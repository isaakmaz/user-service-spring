# User Service - Spring Boot REST API

Привет! Это учебный проект, демонстрирующий создание REST API на Spring Boot. Проект прошел путь от простого консольного приложения до полностью контейнеризованного сервиса с автоматизированными тестами.

## Ключевые концепции и улучшения

В этой версии проекта были учтены следующие профессиональные практики:

1.  **Разделение моделей (Entity и DTO)**: Хотя `UserDto` может выглядеть похоже на `User` (Entity), их разделение критически важно.
    *   **Entity** — это внутреннее представление данных, как они хранятся в базе.
    *   **DTO (Data Transfer Object)** — это "контракт" вашего API. Он определяет, какие данные вы отдаете клиенту и в каком формате. Это позволяет вам изменять внутреннюю структуру базы данных, не ломая API для клиентов.

2.  **Правильный выбор абстракций**: Вместо `JpaRepository` используется `CrudRepository`, так как для данного сервиса достаточно базовых CRUD-операций. Это делает код более лаконичным и сфокусированным.

3.  **RESTful API Conventions**: Эндпоинты переработаны в соответствии со стандартами REST. Ресурсы именуются существительными (`/users`), а действия над ними определяются HTTP-методами (`GET`, `POST`, `DELETE`).

## Стек технологий
*   **Язык**: Java 17
*   **Фреймворк**: Spring Boot 3
*   **Доступ к данным**: Spring Data JPA (Hibernate)
*   **База данных**: PostgreSQL
*   **Сборка**: Maven
*   **Тестирование**: JUnit 5, Mockito, MockMvc
*   **Контейнеризация**: Docker, Docker Compose

## Требования
*   Docker Desktop

*Примечание: Устанавливать Java или Maven на локальную машину не требуется. Весь процесс сборки, тестирования и запуска происходит внутри Docker.*

## Запуск и Проверка
Весь процесс проверки проекта сведен к одной команде.

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/ТВОЙ_НИК/user-service-spring.git
    cd user-service-spring
    ```

2.  **Соберите, протестируйте и запустите проект:**
    ```bash
    docker-compose up --build
    ```

### Что происходит во время выполнения этой команды?
1.  **Сборка**: Docker запускает временный контейнер с Maven, который компилирует исходный код.
2.  **Тестирование**: Maven автоматически запускает все unit-тесты (с MockMvc). **Если тесты не проходят, сборка прерывается с ошибкой.**
3.  **Упаковка**: Если тесты успешны, Maven упаковывает приложение в исполняемый `.jar`-файл.
4.  **Создание образа**: Docker создает финальный, легковесный образ приложения.
5.  **Запуск**: Docker Compose запускает два контейнера: ваше приложение и базу данных PostgreSQL.

*Таким образом, успешный запуск приложения является подтверждением того, что все автоматические тесты прошли успешно.*

После завершения сборки приложение будет доступно по адресу `http://localhost:8080`.

## Локальная разработка (Для разработчика)
Если вы хотите запустить тесты отдельно во время разработки (быстрее, чем пересобирать Docker-образ), можно использовать стандартную команду Maven:

```bash
# Требует установленных Java 17 и Maven
mvn clean test
```

## API Эндпоинты

| Действие               | HTTP Метод | URL                  | Тело запроса | Успешный ответ      |
| ---------------------- | ---------- | -------------------- | ------------ | ------------------- |
| **Создание пользователя**  | `POST`     | `/api/users`         | `JSON`       | `201 Created` + DTO |
| **Получение пользователя** | `GET`      | `/api/users/{id}`    | -            | `200 OK` + DTO      |
| **Обновление пользователя**| `PUT`      | `/api/users/{id}`    | `JSON`       | `200 OK` + DTO      |
| **Удаление пользователя**  | `DELETE`   | `/api/users/{id}`    | -            | `204 No Content`    |

### Пример тела запроса для POST/PUT:
```json
{
  "name": "Имя Фамилия",
  "email": "email@example.com",
  "age": 30
}
```